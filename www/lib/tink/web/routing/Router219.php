<?php
/**
 * Generated by Haxe 4.0.0 (git build development @ 3018ab1)
 * Haxe source file: /Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx
 */

namespace tink\web\routing;

use \tink\json\Writer64;
use \tink\core\_Promise\Promise_Impl_;
use \tink\core\Outcome;
use \php\Boot;
use \tink\core\TypedError;
use \tink\core\_Future\FutureObject;
use \tink\json\Writer63;
use \app\TinkLiteRoute;
use \tink\core\_Promise\Next_Impl_;
use \tink\web\routing\_Response\Response_Impl_;
use \php\_Boot\HxAnon;

class Router219 {
	/**
	 * @var TinkLiteRoute
	 */
	public $target;


	/**
	 * @param TinkLiteRoute $target
	 * 
	 * @return void
	 */
	public function __construct ($target) {
		#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:218: characters 11-31
		$this->target = $target;
	}


	/**
	 * @param Context $ctx
	 * 
	 * @return FutureObject
	 */
	public function all ($ctx) {
		#src/app/TinkLiteRoute.hx:17: lines 17-20
		return Promise_Impl_::next($this->target->all(), function ($__data__)  use (&$ctx) {
			#src/app/TinkLiteRoute.hx:17: lines 17-20
			if (($ctx->accepts)("application/json")) {
				#src/app/TinkLiteRoute.hx:17: lines 17-20
				return Promise_Impl_::ofOutcome(Outcome::Success(Response_Impl_::textual(null, "application/json", (new Writer63())->write($__data__))));
			}
			#src/app/TinkLiteRoute.hx:17: lines 17-20
			return Promise_Impl_::ofOutcome(Outcome::Failure(new TypedError(415, "Unsupported Media Type", new HxAnon([
				"fileName" => "TinkLiteRoute.hx",
				"lineNumber" => 17,
				"className" => "tink.web.routing.Router219",
				"methodName" => "all",
			]))));
		});
	}


	/**
	 * @param Context $ctx
	 * 
	 * @return FutureObject
	 */
	public function create ($ctx) {
		#src/app/TinkLiteRoute.hx:29: lines 29-33
		return Promise_Impl_::next($this->target->create(), function ($__data__) {
			#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:419: characters 36-76
			return Promise_Impl_::ofOutcome(Outcome::Success(Response_Impl_::empty()));
		});
	}


	/**
	 * @param Context $ctx
	 * 
	 * @return FutureObject
	 */
	public function rec ($ctx) {
		#src/app/TinkLiteRoute.hx:23: lines 23-27
		return Promise_Impl_::next($this->target->rec(), function ($__data__)  use (&$ctx) {
			#src/app/TinkLiteRoute.hx:23: lines 23-27
			if (($ctx->accepts)("application/json")) {
				#src/app/TinkLiteRoute.hx:23: lines 23-27
				return Promise_Impl_::ofOutcome(Outcome::Success(Response_Impl_::textual(null, "application/json", (new Writer64())->write($__data__))));
			}
			#src/app/TinkLiteRoute.hx:23: lines 23-27
			return Promise_Impl_::ofOutcome(Outcome::Failure(new TypedError(415, "Unsupported Media Type", new HxAnon([
				"fileName" => "TinkLiteRoute.hx",
				"lineNumber" => 23,
				"className" => "tink.web.routing.Router219",
				"methodName" => "rec",
			]))));
		});
	}


	/**
	 * @param Context $ctx
	 * 
	 * @return FutureObject
	 */
	public function route ($ctx) {
		#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:222: characters 11-34
		$l = $ctx->parts->length - $ctx->depth;
		#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:143: characters 22-31
		$_g = $l > 1;
		#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:143: characters 22-31
		$_g1 = $l > 0;
		#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:140: characters 22-41
		$_g2 = $ctx->part(0);
		#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:137: characters 22-39
		$_g3 = $ctx->request->header->method;
		#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:137: characters 22-39
		if ($_g3 === "GET") {
			#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:140: characters 22-41
			switch ($_g2) {
				case "all":
					#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:143: characters 22-31
					if ($_g1 === true) {
						#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:143: characters 22-31
						if ($_g === false) {
							#src/app/TinkLiteRoute.hx:16: characters 2-6
							return Promise_Impl_::ofSpecific($this->all($ctx));
						} else {
							#src/app/Server.hx:57: characters 12-47
							$this1 = $ctx->request->header->url;
							#src/app/Server.hx:57: characters 12-47
							return Promise_Impl_::ofOutcome(Outcome::Failure(new TypedError(404, "Not Found: [" . ($ctx->request->header->method??'null') . "] " . ((($this1->query === null ? $this1->path : ($this1->path??'null') . "?" . ($this1->query??'null')))??'null'), new HxAnon([
								"fileName" => "Server.hx",
								"lineNumber" => 57,
								"className" => "tink.web.routing.Router219",
								"methodName" => "route",
							]))));
						}
					} else {
						#src/app/Server.hx:57: characters 12-47
						$this11 = $ctx->request->header->url;
						#src/app/Server.hx:57: characters 12-47
						return Promise_Impl_::ofOutcome(Outcome::Failure(new TypedError(404, "Not Found: [" . ($ctx->request->header->method??'null') . "] " . ((($this11->query === null ? $this11->path : ($this11->path??'null') . "?" . ($this11->query??'null')))??'null'), new HxAnon([
							"fileName" => "Server.hx",
							"lineNumber" => 57,
							"className" => "tink.web.routing.Router219",
							"methodName" => "route",
						]))));
					}
					break;
				case "create":
					#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:143: characters 22-31
					if ($_g1 === true) {
						#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:143: characters 22-31
						if ($_g === false) {
							#src/app/TinkLiteRoute.hx:28: characters 2-6
							return Promise_Impl_::ofSpecific($this->create($ctx));
						} else {
							#src/app/Server.hx:57: characters 12-47
							$this12 = $ctx->request->header->url;
							#src/app/Server.hx:57: characters 12-47
							return Promise_Impl_::ofOutcome(Outcome::Failure(new TypedError(404, "Not Found: [" . ($ctx->request->header->method??'null') . "] " . ((($this12->query === null ? $this12->path : ($this12->path??'null') . "?" . ($this12->query??'null')))??'null'), new HxAnon([
								"fileName" => "Server.hx",
								"lineNumber" => 57,
								"className" => "tink.web.routing.Router219",
								"methodName" => "route",
							]))));
						}
					} else {
						#src/app/Server.hx:57: characters 12-47
						$this13 = $ctx->request->header->url;
						#src/app/Server.hx:57: characters 12-47
						return Promise_Impl_::ofOutcome(Outcome::Failure(new TypedError(404, "Not Found: [" . ($ctx->request->header->method??'null') . "] " . ((($this13->query === null ? $this13->path : ($this13->path??'null') . "?" . ($this13->query??'null')))??'null'), new HxAnon([
							"fileName" => "Server.hx",
							"lineNumber" => 57,
							"className" => "tink.web.routing.Router219",
							"methodName" => "route",
						]))));
					}
					break;
				case "rec":
					#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:143: characters 22-31
					if ($_g1 === true) {
						#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:143: characters 22-31
						if ($_g === false) {
							#src/app/TinkLiteRoute.hx:22: characters 2-6
							return Promise_Impl_::ofSpecific($this->rec($ctx));
						} else {
							#src/app/Server.hx:57: characters 12-47
							$this14 = $ctx->request->header->url;
							#src/app/Server.hx:57: characters 12-47
							return Promise_Impl_::ofOutcome(Outcome::Failure(new TypedError(404, "Not Found: [" . ($ctx->request->header->method??'null') . "] " . ((($this14->query === null ? $this14->path : ($this14->path??'null') . "?" . ($this14->query??'null')))??'null'), new HxAnon([
								"fileName" => "Server.hx",
								"lineNumber" => 57,
								"className" => "tink.web.routing.Router219",
								"methodName" => "route",
							]))));
						}
					} else {
						#src/app/Server.hx:57: characters 12-47
						$this15 = $ctx->request->header->url;
						#src/app/Server.hx:57: characters 12-47
						return Promise_Impl_::ofOutcome(Outcome::Failure(new TypedError(404, "Not Found: [" . ($ctx->request->header->method??'null') . "] " . ((($this15->query === null ? $this15->path : ($this15->path??'null') . "?" . ($this15->query??'null')))??'null'), new HxAnon([
							"fileName" => "Server.hx",
							"lineNumber" => 57,
							"className" => "tink.web.routing.Router219",
							"methodName" => "route",
						]))));
					}
					break;
				case "tst":
					#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:143: characters 22-31
					if ($_g1 === true) {
						#/Users/ut/haxe/haxe_libraries/tink_web/0.1.4/github/c4323c7b0c2f0b44e696eea51c9bfdff41716880/src/tink/web/macros/Routing.hx:143: characters 22-31
						if ($_g === false) {
							#src/app/TinkLiteRoute.hx:9: characters 2-6
							return Promise_Impl_::ofSpecific($this->tst($ctx));
						} else {
							#src/app/Server.hx:57: characters 12-47
							$this16 = $ctx->request->header->url;
							#src/app/Server.hx:57: characters 12-47
							return Promise_Impl_::ofOutcome(Outcome::Failure(new TypedError(404, "Not Found: [" . ($ctx->request->header->method??'null') . "] " . ((($this16->query === null ? $this16->path : ($this16->path??'null') . "?" . ($this16->query??'null')))??'null'), new HxAnon([
								"fileName" => "Server.hx",
								"lineNumber" => 57,
								"className" => "tink.web.routing.Router219",
								"methodName" => "route",
							]))));
						}
					} else {
						#src/app/Server.hx:57: characters 12-47
						$this17 = $ctx->request->header->url;
						#src/app/Server.hx:57: characters 12-47
						return Promise_Impl_::ofOutcome(Outcome::Failure(new TypedError(404, "Not Found: [" . ($ctx->request->header->method??'null') . "] " . ((($this17->query === null ? $this17->path : ($this17->path??'null') . "?" . ($this17->query??'null')))??'null'), new HxAnon([
							"fileName" => "Server.hx",
							"lineNumber" => 57,
							"className" => "tink.web.routing.Router219",
							"methodName" => "route",
						]))));
					}
					break;
				default:
					#src/app/Server.hx:57: characters 12-47
					$this18 = $ctx->request->header->url;
					#src/app/Server.hx:57: characters 12-47
					return Promise_Impl_::ofOutcome(Outcome::Failure(new TypedError(404, "Not Found: [" . ($ctx->request->header->method??'null') . "] " . ((($this18->query === null ? $this18->path : ($this18->path??'null') . "?" . ($this18->query??'null')))??'null'), new HxAnon([
						"fileName" => "Server.hx",
						"lineNumber" => 57,
						"className" => "tink.web.routing.Router219",
						"methodName" => "route",
					]))));
					break;
			}
		} else {
			#src/app/Server.hx:57: characters 12-47
			$this19 = $ctx->request->header->url;
			#src/app/Server.hx:57: characters 12-47
			return Promise_Impl_::ofOutcome(Outcome::Failure(new TypedError(404, "Not Found: [" . ($ctx->request->header->method??'null') . "] " . ((($this19->query === null ? $this19->path : ($this19->path??'null') . "?" . ($this19->query??'null')))??'null'), new HxAnon([
				"fileName" => "Server.hx",
				"lineNumber" => 57,
				"className" => "tink.web.routing.Router219",
				"methodName" => "route",
			]))));
		}
	}


	/**
	 * @param Context $ctx
	 * 
	 * @return FutureObject
	 */
	public function tst ($ctx) {
		#src/app/TinkLiteRoute.hx:10: lines 10-15
		return Promise_Impl_::next(Promise_Impl_::ofOutcome(Outcome::Success($this->target->tst())), Next_Impl_::ofSafeSync(function ($v) {
			#src/app/TinkLiteRoute.hx:10: lines 10-15
			return Response_Impl_::ofString($v);
		}));
	}
}


Boot::registerClass(Router219::class, 'tink.web.routing.Router219');
